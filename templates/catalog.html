{% extends "layout.html" %}

{% block title %}Merchandise Catalog{% endblock %}

{% block content %}
<h1>Merchandise Catalog</h1>
<p>Explore our unique selection of products below!</p>
<div class="product-grid">
	<div class="product-card" data-product-id="poker_tee">
		<img src="static/product_images/poker_tee_black.png" alt="Cool Cat Poker">
		<h3>Cool Cat Poker</h3>
		<p>$25.99</p>
		<p>Select Color:</p>
		<select name="Select Color" class="select-product-variation" style="width: auto; border: solid; border-color: #27ae60">
			<option value="black">Black</option>
			<option value="white">White</option>
			<option value="blue" >Blue</option>
			<option value="red"  >Red</option>
		</select>
		<button class="add-to-cart">Add to Cart</button>
	</div>

	<div class="product-card" data-product-id="cns_tee">
		<img src="static/product_images/cns_tee_black.png" alt="A Cat Named Slickback">
		<h3>A Cat Named Slickback</h3>
		<p>$29.99</p>
		<p>Select Color:</p>
		<select name="Select Color" class="select-product-variation" style="width: auto; border: solid; border-color: #27ae60">
			<option value="black">Black</option>
			<option value="white">White</option>
			<option value="blue" >Blue</option>
			<option value="red"  >Red</option>
		</select>
		<button class="add-to-cart">Add to Cart</button>
	</div>

	<div class="product-card" data-product-id="money_tee">
		<img src="static/product_images/money_tee_black.png" alt="Cool Cat Cash">
		<h3>Cool Cat Cash</h3>
		<p>$29.99</p>
		<p>Select Color:</p>
		<select name="Select Color" class="select-product-variation" style="width: auto; border: solid; border-color: #27ae60">
			<option value="black">Black</option>
			<option value="white">White</option>
			<option value="blue" >Blue</option>
			<option value="red"  >Red</option>
		</select>
		<button class="add-to-cart">Add to Cart</button>
	</div>
	<!-- Add more products as needed -->
</div>


<script>
document.addEventListener('DOMContentLoaded', () => {
	const product_cards = document.querySelectorAll('.product-card');

	product_cards.forEach(card => {
		const img = card.querySelector('img');
		const select = card.querySelector('.select-product-variation');
		const purchase_button = card.querySelector('.add-to-cart');
		const product_name = card.dataset.productId;
		console.log(product_name)

		if (!select) {
			console.error(`Select element not found in card ${product_name}`);
			return; // Skip this iteration if select is not found
		} else if (!img) {
			console.error(`Image element not found in card ${product_name}`);
			return; // Skip this iteration if img is not found
		} else if (!purchase_button) {
			console.error(`Purchase button element not found in card ${product_name}`);
			return; // Skip this iteration if img is not found
		}

		select.addEventListener('change', (e) => {
			let color = e.target.value;
			console.log(`Color changed to ${color} for ${product_name}`);
			img.src = `/static/product_images/${product_name}_${color}.png`;
		});
	});
});
</script>
{% endblock %}



<!-- I believe we should be able to have this link straight to the products page in the database -->
